<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Crystal Docs 1.10.1">
<meta name="crystal_docs.project_version" content="0.12.0">
<meta name="crystal_docs.project_name" content="redis">



<link href="css/style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="js/doc.js"></script>

  <meta name="repository-name" content="redis">
  <title>redis 0.12.0</title>
  <script type="text/javascript">
  CrystalDocs.base_path = "";
  </script>
</head>
<body>

<svg class="hidden">
  <symbol id="octicon-link" viewBox="0 0 16 16">
    <path fill="currentColor" fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
  </symbol>
</svg>
<input type="checkbox" id="sidebar-btn">
<label for="sidebar-btn" id="sidebar-btn-label">
  <svg class="open" xmlns="http://www.w3.org/2000/svg" height="2em" width="2em" viewBox="0 0 512 512"><title>Open Sidebar</title><path fill="currentColor" d="M80 96v64h352V96H80zm0 112v64h352v-64H80zm0 112v64h352v-64H80z"></path></svg>
  <svg class="close" xmlns="http://www.w3.org/2000/svg" width="2em" height="2em" viewBox="0 0 512 512"><title>Close Sidebar</title><path fill="currentColor" d="m118.6 73.4-45.2 45.2L210.7 256 73.4 393.4l45.2 45.2L256 301.3l137.4 137.3 45.2-45.2L301.3 256l137.3-137.4-45.2-45.2L256 210.7Z"></path></svg>
</label>
<div class="sidebar">
  <div class="sidebar-header">
    <div class="search-box">
      <input type="search" class="search-input" placeholder="Search..." spellcheck="false" aria-label="Search">
    </div>

    <div class="project-summary">
      <h1 class="project-name">
        <a href="index.html">
          redis
        </a>
      </h1>

      <span class="project-version">
        0.12.0
      </span>
    </div>
  </div>

  <div class="search-results hidden">
    <ul class="search-list"></ul>
  </div>

  <div class="types-list">
    <ul>
  
  <li class="parent " data-id="redis/Redis" data-name="redis">
      <a href="Redis.html">Redis</a>
      
        <ul>
  
  <li class=" " data-id="redis/Redis/BusyGroup" data-name="redis::busygroup">
      <a href="Redis/BusyGroup.html">BusyGroup</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/Client" data-name="redis::client">
      <a href="Redis/Client.html">Client</a>
      
    </li>
  
  <li class="parent " data-id="redis/Redis/Cluster" data-name="redis::cluster">
      <a href="Redis/Cluster.html">Cluster</a>
      
        <ul>
  
  <li class=" " data-id="redis/Redis/Cluster/Ask" data-name="redis::cluster::ask">
      <a href="Redis/Cluster/Ask.html">Ask</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/Cluster/CrossSlot" data-name="redis::cluster::crossslot">
      <a href="Redis/Cluster/CrossSlot.html">CrossSlot</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/Cluster/Error" data-name="redis::cluster::error">
      <a href="Redis/Cluster/Error.html">Error</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/Cluster/Moved" data-name="redis::cluster::moved">
      <a href="Redis/Cluster/Moved.html">Moved</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="redis/Redis/Commands" data-name="redis::commands">
      <a href="Redis/Commands.html">Commands</a>
      
        <ul>
  
  <li class=" " data-id="redis/Redis/Commands/EmptyEnumerable" data-name="redis::commands::emptyenumerable">
      <a href="Redis/Commands/EmptyEnumerable.html">EmptyEnumerable</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/Commands/Geo" data-name="redis::commands::geo">
      <a href="Redis/Commands/Geo.html">Geo</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/Commands/Hash" data-name="redis::commands::hash">
      <a href="Redis/Commands/Hash.html">Hash</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/Commands/HyperLogLog" data-name="redis::commands::hyperloglog">
      <a href="Redis/Commands/HyperLogLog.html">HyperLogLog</a>
      
    </li>
  
  <li class="parent " data-id="redis/Redis/Commands/List" data-name="redis::commands::list">
      <a href="Redis/Commands/List.html">List</a>
      
        <ul>
  
  <li class=" " data-id="redis/Redis/Commands/List/Side" data-name="redis::commands::list::side">
      <a href="Redis/Commands/List/Side.html">Side</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="redis/Redis/Commands/ScriptFlushMode" data-name="redis::commands::scriptflushmode">
      <a href="Redis/Commands/ScriptFlushMode.html">ScriptFlushMode</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/Commands/Set" data-name="redis::commands::set">
      <a href="Redis/Commands/Set.html">Set</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/Commands/SortedSet" data-name="redis::commands::sortedset">
      <a href="Redis/Commands/SortedSet.html">SortedSet</a>
      
    </li>
  
  <li class="parent " data-id="redis/Redis/Commands/Stream" data-name="redis::commands::stream">
      <a href="Redis/Commands/Stream.html">Stream</a>
      
        <ul>
  
  <li class=" " data-id="redis/Redis/Commands/Stream/XGroup" data-name="redis::commands::stream::xgroup">
      <a href="Redis/Commands/Stream/XGroup.html">XGroup</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="redis/Redis/Connection" data-name="redis::connection">
      <a href="Redis/Connection.html">Connection</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/Error" data-name="redis::error">
      <a href="Redis/Error.html">Error</a>
      
    </li>
  
  <li class="parent " data-id="redis/Redis/FullText" data-name="redis::fulltext(runnable)">
      <a href="Redis/FullText.html">FullText</a>
      
        <ul>
  
  <li class=" " data-id="redis/Redis/FullText/Apply" data-name="redis::fulltext::apply">
      <a href="Redis/FullText/Apply.html">Apply</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/FullText/Filter" data-name="redis::fulltext::filter">
      <a href="Redis/FullText/Filter.html">Filter</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/FullText/GeoFilter" data-name="redis::fulltext::geofilter">
      <a href="Redis/FullText/GeoFilter.html">GeoFilter</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/FullText/GeoUnit" data-name="redis::fulltext::geounit">
      <a href="Redis/FullText/GeoUnit.html">GeoUnit</a>
      
    </li>
  
  <li class="parent " data-id="redis/Redis/FullText/GroupBy" data-name="redis::fulltext::groupby">
      <a href="Redis/FullText/GroupBy.html">GroupBy</a>
      
        <ul>
  
  <li class="parent " data-id="redis/Redis/FullText/GroupBy/Reducer" data-name="redis::fulltext::groupby::reducer">
      <a href="Redis/FullText/GroupBy/Reducer.html">Reducer</a>
      
        <ul>
  
  <li class=" " data-id="redis/Redis/FullText/GroupBy/Reducer/Order" data-name="redis::fulltext::groupby::reducer::order">
      <a href="Redis/FullText/GroupBy/Reducer/Order.html">Order</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="redis/Redis/FullText/Highlight" data-name="redis::fulltext::highlight">
      <a href="Redis/FullText/Highlight.html">Highlight</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/FullText/SortBy" data-name="redis::fulltext::sortby">
      <a href="Redis/FullText/SortBy.html">SortBy</a>
      
    </li>
  
  <li class="parent " data-id="redis/Redis/FullText/SortByAggregate" data-name="redis::fulltext::sortbyaggregate">
      <a href="Redis/FullText/SortByAggregate.html">SortByAggregate</a>
      
        <ul>
  
  <li class=" " data-id="redis/Redis/FullText/SortByAggregate/Order" data-name="redis::fulltext::sortbyaggregate::order">
      <a href="Redis/FullText/SortByAggregate/Order.html">Order</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/FullText/SortByAggregate/Property" data-name="redis::fulltext::sortbyaggregate::property">
      <a href="Redis/FullText/SortByAggregate/Property.html">Property</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="redis/Redis/FullText/SortDirection" data-name="redis::fulltext::sortdirection">
      <a href="Redis/FullText/SortDirection.html">SortDirection</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/FullText/Summarize" data-name="redis::fulltext::summarize">
      <a href="Redis/FullText/Summarize.html">Summarize</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="redis/Redis/Future" data-name="redis::future">
      <a href="Redis/Future.html">Future</a>
      
        <ul>
  
  <li class=" " data-id="redis/Redis/Future/NotResolved" data-name="redis::future::notresolved">
      <a href="Redis/Future/NotResolved.html">NotResolved</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="redis/Redis/Geo" data-name="redis::geo">
      <a href="Redis/Geo.html">Geo</a>
      
        <ul>
  
  <li class="parent " data-id="redis/Redis/Geo/Radius" data-name="redis::geo::radius">
      <a href="Redis/Geo/Radius.html">Radius</a>
      
        <ul>
  
  <li class=" " data-id="redis/Redis/Geo/Radius/Unit" data-name="redis::geo::radius::unit">
      <a href="Redis/Geo/Radius/Unit.html">Unit</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="redis/Redis/Geo/Sort" data-name="redis::geo::sort">
      <a href="Redis/Geo/Sort.html">Sort</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="redis/Redis/Graph" data-name="redis::graph">
      <a href="Redis/Graph.html">Graph</a>
      
        <ul>
  
  <li class=" " data-id="redis/Redis/Graph/Cache" data-name="redis::graph::cache">
      <a href="Redis/Graph/Cache.html">Cache</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/Graph/Client" data-name="redis::graph::client(runnable)">
      <a href="Redis/Graph/Client.html">Client</a>
      
    </li>
  
  <li class="parent " data-id="redis/Redis/Graph/Constraints" data-name="redis::graph::constraints(t)">
      <a href="Redis/Graph/Constraints.html">Constraints</a>
      
        <ul>
  
  <li class=" " data-id="redis/Redis/Graph/Constraints/Constraint" data-name="redis::graph::constraints::constraint">
      <a href="Redis/Graph/Constraints/Constraint.html">Constraint</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/Graph/Constraints/EntityType" data-name="redis::graph::constraints::entitytype">
      <a href="Redis/Graph/Constraints/EntityType.html">EntityType</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/Graph/Constraints/Status" data-name="redis::graph::constraints::status">
      <a href="Redis/Graph/Constraints/Status.html">Status</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/Graph/Constraints/Type" data-name="redis::graph::constraints::type">
      <a href="Redis/Graph/Constraints/Type.html">Type</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="redis/Redis/Graph/ConstraintViolation" data-name="redis::graph::constraintviolation">
      <a href="Redis/Graph/ConstraintViolation.html">ConstraintViolation</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/Graph/Error" data-name="redis::graph::error">
      <a href="Redis/Graph/Error.html">Error</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/Graph/Field" data-name="redis::graph::field">
      <a href="Redis/Graph/Field.html">Field</a>
      
    </li>
  
  <li class="parent " data-id="redis/Redis/Graph/Indices" data-name="redis::graph::indices(t)">
      <a href="Redis/Graph/Indices.html">Indices</a>
      
        <ul>
  
  <li class=" " data-id="redis/Redis/Graph/Indices/IndexAlreadyExists" data-name="redis::graph::indices::indexalreadyexists">
      <a href="Redis/Graph/Indices/IndexAlreadyExists.html">IndexAlreadyExists</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="redis/Redis/Graph/List" data-name="redis::graph::list">
      <a href="Redis/Graph/List.html">List</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/Graph/Map" data-name="redis::graph::map">
      <a href="Redis/Graph/Map.html">Map</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/Graph/Node" data-name="redis::graph::node">
      <a href="Redis/Graph/Node.html">Node</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/Graph/Point" data-name="redis::graph::point">
      <a href="Redis/Graph/Point.html">Point</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/Graph/Relationship" data-name="redis::graph::relationship">
      <a href="Redis/Graph/Relationship.html">Relationship</a>
      
    </li>
  
  <li class="parent " data-id="redis/Redis/Graph/ResultSet" data-name="redis::graph::resultset(t)">
      <a href="Redis/Graph/ResultSet.html">ResultSet</a>
      
        <ul>
  
  <li class=" " data-id="redis/Redis/Graph/ResultSet/Row" data-name="redis::graph::resultset::row(t)">
      <a href="Redis/Graph/ResultSet/Row.html">Row</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="redis/Redis/Graph/Serializable" data-name="redis::graph::serializable">
      <a href="Redis/Graph/Serializable.html">Serializable</a>
      
        <ul>
  
  <li class="parent " data-id="redis/Redis/Graph/Serializable/Node" data-name="redis::graph::serializable::node">
      <a href="Redis/Graph/Serializable/Node.html">Node</a>
      
        <ul>
  
  <li class=" " data-id="redis/Redis/Graph/Serializable/Node/Metadata" data-name="redis::graph::serializable::node::metadata">
      <a href="Redis/Graph/Serializable/Node/Metadata.html">Metadata</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/Graph/Serializable/Node/PropertyMissing" data-name="redis::graph::serializable::node::propertymissing">
      <a href="Redis/Graph/Serializable/Node/PropertyMissing.html">PropertyMissing</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="redis/Redis/Graph/Serializable/Property" data-name="redis::graph::serializable::property">
      <a href="Redis/Graph/Serializable/Property.html">Property</a>
      
        <ul>
  
  <li class=" " data-id="redis/Redis/Graph/Serializable/Property/InvalidType" data-name="redis::graph::serializable::property::invalidtype">
      <a href="Redis/Graph/Serializable/Property/InvalidType.html">InvalidType</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="redis/Redis/Graph/Serializable/Relationship" data-name="redis::graph::serializable::relationship">
      <a href="Redis/Graph/Serializable/Relationship.html">Relationship</a>
      
        <ul>
  
  <li class=" " data-id="redis/Redis/Graph/Serializable/Relationship/Metadata" data-name="redis::graph::serializable::relationship::metadata">
      <a href="Redis/Graph/Serializable/Relationship/Metadata.html">Metadata</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/Graph/Serializable/Relationship/PropertyMissing" data-name="redis::graph::serializable::relationship::propertymissing">
      <a href="Redis/Graph/Serializable/Relationship/PropertyMissing.html">PropertyMissing</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="redis/Redis/Graph/UnexpectedValue" data-name="redis::graph::unexpectedvalue">
      <a href="Redis/Graph/UnexpectedValue.html">UnexpectedValue</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/Graph/Value" data-name="redis::graph::value">
      <a href="Redis/Graph/Value.html">Value</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/Graph/ValueType" data-name="redis::graph::valuetype">
      <a href="Redis/Graph/ValueType.html">ValueType</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="redis/Redis/JSON" data-name="redis::json(runnable)">
      <a href="Redis/JSON.html">JSON</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/NoGroup" data-name="redis::nogroup">
      <a href="Redis/NoGroup.html">NoGroup</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/Parser" data-name="redis::parser">
      <a href="Redis/Parser.html">Parser</a>
      
    </li>
  
  <li class="parent " data-id="redis/Redis/Pipeline" data-name="redis::pipeline">
      <a href="Redis/Pipeline.html">Pipeline</a>
      
        <ul>
  
  <li class=" " data-id="redis/Redis/Pipeline/ResolutionError" data-name="redis::pipeline::resolutionerror">
      <a href="Redis/Pipeline/ResolutionError.html">ResolutionError</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="redis/Redis/ReplicationClient" data-name="redis::replicationclient">
      <a href="Redis/ReplicationClient.html">ReplicationClient</a>
      
        <ul>
  
  <li class="parent " data-id="redis/Redis/ReplicationClient/Info" data-name="redis::replicationclient::info">
      <a href="Redis/ReplicationClient/Info.html">Info</a>
      
        <ul>
  
  <li class="parent " data-id="redis/Redis/ReplicationClient/Info/Replica" data-name="redis::replicationclient::info::replica">
      <a href="Redis/ReplicationClient/Info/Replica.html">Replica</a>
      
        <ul>
  
  <li class=" " data-id="redis/Redis/ReplicationClient/Info/Replica/State" data-name="redis::replicationclient::info::replica::state">
      <a href="Redis/ReplicationClient/Info/Replica/State.html">State</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="redis/Redis/ReplicationClient/Info/Replication" data-name="redis::replicationclient::info::replication">
      <a href="Redis/ReplicationClient/Info/Replication.html">Replication</a>
      
        <ul>
  
  <li class=" " data-id="redis/Redis/ReplicationClient/Info/Replication/Role" data-name="redis::replicationclient::info::replication::role">
      <a href="Redis/ReplicationClient/Info/Replication/Role.html">Role</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="redis/Redis/Streaming" data-name="redis::streaming">
      <a href="Redis/Streaming.html">Streaming</a>
      
        <ul>
  
  <li class=" " data-id="redis/Redis/Streaming/Message" data-name="redis::streaming::message">
      <a href="Redis/Streaming/Message.html">Message</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/Streaming/XAutoClaimResponse" data-name="redis::streaming::xautoclaimresponse">
      <a href="Redis/Streaming/XAutoClaimResponse.html">XAutoClaimResponse</a>
      
    </li>
  
  <li class="parent " data-id="redis/Redis/Streaming/XPendingBaseResponse" data-name="redis::streaming::xpendingbaseresponse">
      <a href="Redis/Streaming/XPendingBaseResponse.html">XPendingBaseResponse</a>
      
        <ul>
  
  <li class=" " data-id="redis/Redis/Streaming/XPendingBaseResponse/Data" data-name="redis::streaming::xpendingbaseresponse::data">
      <a href="Redis/Streaming/XPendingBaseResponse/Data.html">Data</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="redis/Redis/Streaming/XPendingExtendedResponse" data-name="redis::streaming::xpendingextendedresponse">
      <a href="Redis/Streaming/XPendingExtendedResponse.html">XPendingExtendedResponse</a>
      
        <ul>
  
  <li class=" " data-id="redis/Redis/Streaming/XPendingExtendedResponse/MessageData" data-name="redis::streaming::xpendingextendedresponse::messagedata">
      <a href="Redis/Streaming/XPendingExtendedResponse/MessageData.html">MessageData</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="redis/Redis/Streaming/XReadGroupResponse" data-name="redis::streaming::xreadgroupresponse">
      <a href="Redis/Streaming/XReadGroupResponse.html">XReadGroupResponse</a>
      
        <ul>
  
  <li class=" " data-id="redis/Redis/Streaming/XReadGroupResponse/Result" data-name="redis::streaming::xreadgroupresponse::result">
      <a href="Redis/Streaming/XReadGroupResponse/Result.html">Result</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="redis/Redis/Subscription" data-name="redis::subscription">
      <a href="Redis/Subscription.html">Subscription</a>
      
        <ul>
  
  <li class=" " data-id="redis/Redis/Subscription/InvalidMessage" data-name="redis::subscription::invalidmessage">
      <a href="Redis/Subscription/InvalidMessage.html">InvalidMessage</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="redis/Redis/TimeSeries" data-name="redis::timeseries(runnable)">
      <a href="Redis/TimeSeries.html">TimeSeries</a>
      
        <ul>
  
  <li class=" " data-id="redis/Redis/TimeSeries/Aggregation" data-name="redis::timeseries::aggregation">
      <a href="Redis/TimeSeries/Aggregation.html">Aggregation</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/TimeSeries/AggregationType" data-name="redis::timeseries::aggregationtype">
      <a href="Redis/TimeSeries/AggregationType.html">AggregationType</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/TimeSeries/Alignment" data-name="redis::timeseries::alignment">
      <a href="Redis/TimeSeries/Alignment.html">Alignment</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/TimeSeries/BucketTimestamp" data-name="redis::timeseries::buckettimestamp">
      <a href="Redis/TimeSeries/BucketTimestamp.html">BucketTimestamp</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/TimeSeries/Datapoint" data-name="redis::timeseries::datapoint">
      <a href="Redis/TimeSeries/Datapoint.html">Datapoint</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/TimeSeries/Datapoints" data-name="redis::timeseries::datapoints">
      <a href="Redis/TimeSeries/Datapoints.html">Datapoints</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/TimeSeries/DuplicatePolicy" data-name="redis::timeseries::duplicatepolicy">
      <a href="Redis/TimeSeries/DuplicatePolicy.html">DuplicatePolicy</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/TimeSeries/Encoding" data-name="redis::timeseries::encoding">
      <a href="Redis/TimeSeries/Encoding.html">Encoding</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/TimeSeries/Labels" data-name="redis::timeseries::labels">
      <a href="Redis/TimeSeries/Labels.html">Labels</a>
      
    </li>
  
  <li class="parent " data-id="redis/Redis/TimeSeries/MRangeResponse" data-name="redis::timeseries::mrangeresponse">
      <a href="Redis/TimeSeries/MRangeResponse.html">MRangeResponse</a>
      
        <ul>
  
  <li class=" " data-id="redis/Redis/TimeSeries/MRangeResponse/DatapointMap" data-name="redis::timeseries::mrangeresponse::datapointmap">
      <a href="Redis/TimeSeries/MRangeResponse/DatapointMap.html">DatapointMap</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="redis/Redis/TimeSeries/Range" data-name="redis::timeseries::range">
      <a href="Redis/TimeSeries/Range.html">Range</a>
      
    </li>
  
  <li class="parent " data-id="redis/Redis/TimeSeries/RangeOptions" data-name="redis::timeseries::rangeoptions">
      <a href="Redis/TimeSeries/RangeOptions.html">RangeOptions</a>
      
        <ul>
  
  <li class=" " data-id="redis/Redis/TimeSeries/RangeOptions/Aggregation" data-name="redis::timeseries::rangeoptions::aggregation">
      <a href="Redis/TimeSeries/RangeOptions/Aggregation.html">Aggregation</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="redis/Redis/Transaction" data-name="redis::transaction">
      <a href="Redis/Transaction.html">Transaction</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/Value" data-name="redis::value">
      <a href="Redis/Value.html">Value</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/Writer" data-name="redis::writer">
      <a href="Redis/Writer.html">Writer</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

  </div>
</div>


<div class="main-content">
<h1><a id="redis" class="anchor" href="#redis">  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>redis</h1>
<p>A pure-Crystal implementation of the Redis protocol</p>
<h2><a id="installation" class="anchor" href="#installation">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Installation</h2>
<ol>
<li>
<p>Add the dependency to your <code>shard.yml</code>:</p>
<pre><code class="language-yaml">dependencies:
  redis:
    github: jgaskins/redis</code></pre>
</li>
<li>
<p>Run <code>shards</code></p>
</li>
</ol>
<h2><a id="usage" class="anchor" href="#usage">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Usage</h2>
<pre><code class="language-crystal"><span class="k">require</span> <span class="s">&quot;redis&quot;</span>

redis <span class="o">=</span> <span class="t">Redis</span><span class="t">::</span><span class="t">Client</span>.new <span class="c"># Defaults to `localhost` port 6379</span>

redis.set <span class="s">&quot;foo&quot;</span>, <span class="s">&quot;bar&quot;</span>
redis.get <span class="s">&quot;foo&quot;</span> <span class="c"># =&gt; &quot;bar&quot;</span>

redis.incr <span class="s">&quot;counter&quot;</span> <span class="c"># =&gt; 1</span>
redis.incr <span class="s">&quot;counter&quot;</span> <span class="c"># =&gt; 2</span>
redis.decr <span class="s">&quot;counter&quot;</span> <span class="c"># =&gt; 1</span>

redis.del <span class="s">&quot;foo&quot;</span>, <span class="s">&quot;counter&quot;</span> <span class="c"># =&gt; 2</span></code></pre>
<h3><a id="pipelined-queries" class="anchor" href="#pipelined-queries">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Pipelined queries</h3>
<p>To mitigate latency with multiple queries whose inputs and outputs are completely independent of each other, you can &quot;pipeline&quot; your queries by sending them all at once before reading them. To do this, you can use the <code>pipeline</code> method:</p>
<pre><code class="language-crystal">redis.pipeline <span class="k">do</span> <span class="o">|</span>pipe<span class="o">|</span>
  pipe.incr <span class="s">&quot;foo&quot;</span>
  pipe.set <span class="s">&quot;bar&quot;</span>, <span class="s">&quot;baz&quot;</span>
  pipe.lpush <span class="s">&quot;my-list&quot;</span>, <span class="s">&quot;my value&quot;</span>
<span class="k">end</span></code></pre>
<p>The return value of <code>pipeline</code> will be an array containing the values of each of those calls in the order they were sent. So in this case, it might be <code>[1, nil, 2]</code> to match the return values of <code>incr</code>, <code>set</code>, and <code>lpush</code>, respectively.</p>
<h3><a id="transactions" class="anchor" href="#transactions">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Transactions</h3>
<p>The Redis <a href="https://redis.io/commands/multi"><code>MULTI</code> command</a> begins a transaction, so you can use the <code>multi</code> method to execute a transaction against the server:</p>
<pre><code class="language-crystal">redis.multi <span class="k">do</span> <span class="o">|</span>txn<span class="o">|</span>
  txn.set <span class="s">&quot;foo&quot;</span>, <span class="s">&quot;bar&quot;</span>
  txn.incr <span class="s">&quot;baz&quot;</span>
  txn.lpush <span class="s">&quot;my-list&quot;</span>, <span class="s">&quot;my value&quot;</span>
<span class="k">end</span></code></pre>
<p>The transaction is automatically committed with <a href="https://redis.io/commands/exec"><code>EXEC</code></a> at the end of the block. If an exception occurs within the block, the transaction will be rolled back with <a href="https://redis.io/commands/discard"><code>DISCARD</code></a> before exiting the block.</p>
<p>You may also call <code>txn.discard</code>, which will effectively disable the transaction (all further methods called on the transaction do nothing), but will not exit the block. You will need to exit the block explicitly with <code>break</code> if there are operations within the block that cannot be rolled back, such as sending an email or sending a request to a third-party API.</p>
<p>The reason for this is that the only way to exit a containing block from an inner method in Crystal is to raise an exception, and this library chooses not to use exceptions for flow control.</p>
<h3><a id="beyond-localhost" class="anchor" href="#beyond-localhost">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Beyond <code>localhost</code></h3>
<p>To use a Redis server that isn't at <code>localhost:6379</code>, pass a <code>URI</code> to the client. For example, if you store it in your shell environment:</p>
<pre><code class="language-crystal">redis <span class="o">=</span> <span class="t">Redis</span><span class="t">::</span><span class="t">Client</span>.new(<span class="t">URI</span>.parse(<span class="t">ENV</span>[<span class="s">&quot;REDIS_URL&quot;</span>]))

<span class="c"># ... or ...</span>

redis <span class="o">=</span> <span class="t">Redis</span><span class="t">::</span><span class="t">Client</span>.from_env(<span class="s">&quot;REDIS_URL&quot;</span>)</code></pre>
<p>To connect via SSL, make sure you use the <code>rediss://</code> URL scheme. If your Redis server requires a password or uses a different database slot than <code>0</code>, make sure you include them in the URL:</p>
<pre><code class="language-crystal">redis <span class="o">=</span> <span class="t">Redis</span><span class="t">::</span><span class="t">Client</span>.new(<span class="t">URI</span>.parse(<span class="s">&quot;rediss://:my_password@example.com/3&quot;</span>))</code></pre>
<h3><a id="connection-pool" class="anchor" href="#connection-pool">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Connection Pool</h3>
<p>The <code><a href="Redis/Client.html">Redis::Client</a></code> maintains a connection pool, so there is no need to run your own within your application. When you execute a command on the <code><a href="Redis/Client.html">Redis::Client</a></code>, it is automatically executed against a connection. When you execute a pipeline or transaction with <code>multi</code>, all commands within that block will automatically be routed to the same connection.</p>
<p><strong>Configuration</strong></p>
<p>For this shard, we use the following default setting (outside of the Standard Lib defaults);</p>
<pre><code class="language-crystal">max_idle_pool_size <span class="o">=</span> <span class="n">25</span></code></pre>
<blockquote>
<p>You can override this manually using the URI parameters.
All other settings follow the DB::Pool defaults.</p>
</blockquote>
<p>The behaviour of the connection pool can be configured from a set of query string parameters in the connection URI.</p>
<p>| Name | Default value |
| :--- | :--- |
| initial_pool_size | 1 |
| max_pool_size | 0 (unlimited) |
| max_idle_pool_size | 1 |
| checkout_timeout | 5.0 (seconds) |
| retry_attempts | 1 |
| retry_delay | 1.0 (seconds) |</p>
<p>See <a href="https://crystal-lang.org/reference/1.6/database/connection_pool.html">Crystal guides</a> to learn more.</p>
<p><strong>Example</strong></p>
<pre><code class="language-crystal">pool_params <span class="o">=</span> <span class="s">&quot;?initial_pool_size=1&amp;max_pool_size=10&amp;checkout_timeout=10&amp;retry_attempts=2&amp;retry_delay=0.5&amp;max_idle_pool_size=50&quot;</span>
redis <span class="o">=</span> <span class="t">Redis</span><span class="t">::</span><span class="t">Client</span>.new(<span class="t">URI</span>.parse(<span class="s">&quot;redis://localhost:6379/0</span><span class="i">#{</span>pool_params<span class="i">}</span><span class="s">&quot;</span>))</code></pre>
<p><strong>Recommendations</strong></p>
<p>If you encounter any issues, keep these setting the same;</p>
<ul>
<li><code>initial_pool_size</code></li>
<li><code>max_pool_size</code></li>
<li><code>max_idle_pool_size</code></li>
</ul>
<p>Example:</p>
<pre><code class="language-crystal">initial_pool_size <span class="o">=</span> <span class="n">50</span>
max_pool_size <span class="o">=</span> <span class="n">50</span>
max_idle_pool_size <span class="o">=</span> <span class="n">50</span></code></pre>
<h3><a id="tcp-keep-alive" class="anchor" href="#tcp-keep-alive">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>TCP Keep-Alive</h3>
<p>The <code><a href="Redis/Client.html">Redis::Client</a></code> uses a pool of <code><a href="Redis/Connection.html">Redis::Connection</a></code> under the hood.
Within <code><a href="Redis/Connection.html">Redis::Connection</a></code> we create a <code>TCPSocket</code>, which can accept keepalive params.
The TCP keepalive settings can help you mitigate Redis connection stability issues.</p>
<blockquote>
<p><span class="flag purple">NOTE</span>  This behaviour is disabled by default. See Configuration below on how to enable it.</p>
</blockquote>
<p><strong>Configuration</strong></p>
<p>For this shard, we use the following override setting;</p>
<p>| Name | Default value |
| :--- | :--- |
| keepalive | false |
| keepalive_count | 3 |
| keepalive_idle | 60 |
| keepalive_interval | 30 |</p>
<blockquote>
<p>You can override this manually using the URI parameters.
The settings above have proven to have good results in production environments. However, every environment is different, so tweaking these settings may be necessary.</p>
</blockquote>
<p>See <a href="https://crystal-lang.org/api/1.6.0/TCPSocket.html">Crystal API</a> to learn more.</p>
<p><strong>Example</strong></p>
<pre><code class="language-crystal">params <span class="o">=</span> <span class="s">&quot;?keepalive=true&amp;keepalive_count=5&amp;keepalive_idle=10&amp;keepalive_interval=15&quot;</span>

redis <span class="o">=</span> <span class="t">Redis</span><span class="t">::</span><span class="t">Client</span>.new(<span class="t">URI</span>.parse(<span class="s">&quot;redis://localhost:6379/0</span><span class="i">#{</span>params<span class="i">}</span><span class="s">&quot;</span>))
<span class="c"># or direct connections</span>
redis <span class="o">=</span> <span class="t">Redis</span><span class="t">::</span><span class="t">Connection</span>.new(<span class="t">URI</span>.parse(<span class="s">&quot;redis://localhost:6379/0</span><span class="i">#{</span>params<span class="i">}</span><span class="s">&quot;</span>))</code></pre>
<p><strong>Recommendations</strong></p>
<p>Enable this setting with the defaults if you are encountering connection issues.</p>
<p>Example:</p>
<pre><code class="language-crystal">params <span class="o">=</span> <span class="s">&quot;?keepalive=true&quot;</span>

redis <span class="o">=</span> <span class="t">Redis</span><span class="t">::</span><span class="t">Client</span>.new(<span class="t">URI</span>.parse(<span class="s">&quot;redis://localhost:6379/0</span><span class="i">#{</span>params<span class="i">}</span><span class="s">&quot;</span>))
<span class="c"># or direct connections</span>
redis <span class="o">=</span> <span class="t">Redis</span><span class="t">::</span><span class="t">Connection</span>.new(<span class="t">URI</span>.parse(<span class="s">&quot;redis://localhost:6379/0</span><span class="i">#{</span>params<span class="i">}</span><span class="s">&quot;</span>))</code></pre>
<h2><a id="development" class="anchor" href="#development">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Development</h2>
<p>Make sure you have a Redis or KeyDB server running locally on port 6379.</p>
<p>Redis must be installed with a stack server for the full text search (<code>ft</code>) and time series modules (<code>ts</code>) in order for all specs to run.</p>
<h3><a id="with-docker" class="anchor" href="#with-docker">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>With Docker</h3>
<p>You can use this for your docker-compose file</p>
<pre><code class="language-yaml">redis:
  image: redis/redis-stack-server
  ports:
    - &quot;6379:6379&quot;</code></pre>
<h3><a id="with-homebrew" class="anchor" href="#with-homebrew">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>With Homebrew</h3>
<p>Install the <a href="https://github.com/redis-stack/homebrew-redis-stack"><code>redis-stack</code> from homebrew</a></p>
<h2><a id="contributing" class="anchor" href="#contributing">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Contributing</h2>
<ol>
<li>Fork it (<a href="https://github.com/jgaskins/redis/fork">https://github.com/jgaskins/redis/fork</a>)</li>
<li>Create your feature branch (<code>git checkout -b my-new-feature</code>)</li>
<li>Commit your changes (<code>git commit -am 'Add some feature'</code>)</li>
<li>Push to the branch (<code>git push origin my-new-feature</code>)</li>
<li>Create a new Pull Request</li>
</ol>
<h2><a id="contributors" class="anchor" href="#contributors">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Contributors</h2>
<ul>
<li><a href="https://github.com/jgaskins">Jamie Gaskins</a> - creator and maintainer</li>
</ul>
</div>
</body>
</html>
